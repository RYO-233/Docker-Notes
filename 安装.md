[toc]

# Docker安装

## Docker的基本组成

<img src="img/OIP-C.jpg" alt="查看源图像" style="zoom:150%;" />

### 镜像(images)：

> Docker 镜像就如一个模板，可以通过这个模板来创建容器服务。
>
> 如：
> 		tomcat 镜像 -> run(启动镜像) -> tomcatd容器(用来提供服务器)
>
> 通过这个镜像，能够创建多个容器（最终服务运行或项目运行就是在容器中）。

### 容器(Containers):

> Docker 利用容器技术，能够独立运行一个或一组应用，这是通过镜像创建的。可以将容器理解为一个简易的 Linux 系统。
>
> 容器具有启动、停止、删除等基本指令。

### 仓库(Repository):

> 仓库是用来存放镜像的地方。仓库分为公有仓库和私有仓库。
>
> 官方仓库：Docker Hub。国内有阿里云等容器服务器，需要我们配置镜像加速。

## 安装前准备

### 环境查看

~~~
uname -r
// 查看系统环境
cat /etc/os-release
~~~



![](img/d1.png)

## 安装

### 1. 卸载旧版本

~~~
sudo yum remove docker \
>                   docker-client \
>                   docker-client-latest \
>                   docker-common \
>                   docker-latest \
>                   docker-latest-logrotate \
>                   docker-logrotate \
>                   docker-engine
~~~

### 2. 安装必要的安装包

*安装 yum-utils 包(提供 yum-config-manager 实用程序)，并设置仓库。*

~~~
sudo yum install -y yum-utils
~~~

### 3. 设置镜像的仓库

```
 sudo yum-config-manager \
    --add-repo \
    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
    
 sudo yum-config-manager \
    --add-repo \
    https://download.docker.com/linux/centos/docker-ce.repo	# 默认是国外的
```

### 4. 更新 yum 软件包索引

```
yum makecache fast
```

### 5. 安装 Docker

```
sudo yum install docker-ce docker-ce-cli containerd.io docker-compose-plugin
```

#### 说明

| 参数                  | 说明                                                         |
| --------------------- | ------------------------------------------------------------ |
| docker-ce             | Docker 引擎(社区版)                                          |
| docker-ce-cli         | Docker 引擎的命令行界面(社区版)                              |
| containerd.io         | 守护进程 containerd。它在 docker 包上独立工作，并且是 docker 包所必需的 |
| docker-compose-plugin | docker-compose 插件                                          |

### 6. 启动 Docker

```
sudo systemctl start docker
// 一般用户权限不够，需要使用 sudo 获取 root 权限。
```

#### 查看 Docker 版本

```
sudo docker version
```

### 7. `hello-world`：通过运行映像来验证 Docker 引擎是否已正确安装。

```
sudo docker run hello-world
```
